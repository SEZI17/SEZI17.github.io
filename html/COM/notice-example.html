<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>하루, 단어 > 커뮤니티</title>
    <script src="../../js/jquery-2.1.1.min.js"></script>
    <script src="../../js/jquery-ui.min.js"></script>
    <script src="../../js/jquery.easing.1.3.js"></script>

    <!-- PC버전 -->
    <link rel="stylesheet" href="../../css/pc960/cat_common.css">
    <link rel="stylesheet" href="../../css/pc960/COM/COM_common.css">
    <link rel="stylesheet" href="../../css/pc960/COM/board.css">
    <link rel="stylesheet" href="../../css/pc960/COM/notice.css">
    <link rel="stylesheet" href="../../css/pc960/COM/article.css">
    <!-- //PC버전 -->
    <!-- 모바일 -->
    <link rel="stylesheet" href="../../css/Mobile/mobile_common.css">
    <link rel="stylesheet" href="../../css/Mobile/com/article_mobile.css">
    <link rel="stylesheet" href="../../css/Mobile/COM/COM_mobile_common.css">
    <link rel="stylesheet" href="../../css/Mobile/COM/board_mobile.css">
    <link rel="stylesheet" href="../../css/pc960/COM/article_mobile.css">
    <!-- //모바일 -->
    <link href="https://fonts.googleapis.com/css?family=Stylish:400" rel="stylesheet">
</head>

<body>

    <!-- haru header -->
    <div id="header_com"></div>

    <div id="haru_COM_header">
        <h1>커뮤니티</h1>
        <p>공지사항 및 회원 간 단어 암기 방법을<br> 공유할 수 있습니다.</p>
    </div>
    <!-- //haru header -->

    <div id="haru_contents_wrap">
        <!-- haru aside -->
        <div id="aside_com"></div>
        <!-- //haru aside -->

        <!-- SubContents Here -->
        <section id="haru_subcontents">
            <!-- 커뮤니티 헤더 -->
            <header id="haru_subheader">
                <div id="haru_subtitle">공지사항</div>
                <div id="haru_cat">
                    <p>HOME > 커뮤니티 > 공지사항</p>
                </div>
            </header>
            <!-- //커뮤니티 헤더 -->
            <!-- 게시글 시작 -->
            <div class="article">
                <!-- 게시글 헤더 -->
                <div class="article_head">
                    <h4 class="article_title">{글 제목}</h4>
                    <span>작성일 : <span class="article_date">{작성일}</span></span>
                    <div class="clfx"></div>
                </div>

                <div class="article_info">
                    <span class="article_author">작성자 : {작성자}</span>
                    <span class="article_href">글주소 :<a href="#">{글 주소}</a></span>
                    <div class="clfx"></div>
                </div>
                <hr>
                <!-- //게시글 헤더 -->
                <!-- 게시글 내용 -->
                <div class="article_contents">

                </div>
                <!-- //게시글 내용 -->
                <hr>
                <!-- 게시글 조작 -->
                <div class="article_editor">
                    <span>조회수 : <span class="article_viewer">{조회수}</span> 회</span>
                    <div class="btn" id="delete" onclick="deleteArticle()">삭제</div>
                    <div class="btn" id="edit" onclick="editArticle()">수정</div>
                    <div class="clfx"></div>
                </div>
                <hr>

                <div class="article_footer">
                    <div class="footer_list">

                        <span>다음글 : <span class="article_next">{다음 글제목}</span></span><br>
                        <span>이전글 : <span class="article_before">{이전 글제목}</span></span>
                    </div>
                    <div class="btn" onclick="moveList()">목록</div>
                    <div class="clfx"></div>
                </div>
                <hr>
                <!-- //게시글 조작 -->
            </div>
            <!-- //SubContents Here -->
        </section>
    </div>
    <!-- haru footer -->
    <div id="footer_com"></div>
    <!-- //haru footer -->

    <script>
        $.urlParam = (name) => {
            let results = new RegExp('[\?&]' + name + '=([^&#]*)').exec(window.location.href);
            if (results == null) {
                return null;
            }
            else {
                return results[1] || 0;
            }
        }

        async function loadArticle(url) {
            try {
                let queryUrl = "notice_article/" + url + ".json";
                let data = await fetch(queryUrl);
                let articleData = await data.json();
                let articleUrl = "{{도메인}}/"+"html/COM/notice-example.html?id=" + url;
                
                $('.article_title').text(articleData.title);
                $('.article_date').text(articleData.date);
                $('.article_href').children('a').attr('href', articleUrl).text(" " + articleUrl);
                $('.article_contents').html(articleData.content);
                $('.article_author').text(articleData.author);
                $('.article_viewer').text(articleData.viewer);
            }
            catch (err) {
                console.error(err);
            }
        }

        $(() => {

            let url = $.urlParam('id');

            let article = loadArticle(url);

            $('#header_com').load("../haru_header.html");
            $('#aside_com').load("./navCOM.html");
            $('#footer_com').load('../haru_footer.html');
            // $('.article_contents').text(articleData.content)
        })
        function deleteArticle() {
            let con = confirm("삭제 하시겠습니까?")
            if (con) {
                // 게시글 삭제 기능 추가
                // //게시글 삭제
                location.href = "./notice.html"
            }
        }
        function editArticle() {
            let con = confirm("수정 하시겠습니까?")
            if (con) {
                // 게시글 삭제 기능 추가
                // //게시글 삭제
                location.href = "./noticeu.html";
            }
        }
        function moveList() {
            location.href = "./notice.html"
        }
    </script>
    <!-- //Contents Here -->
    <!-- haru footer -->

    <!-- //haru footer -->

</body>

</html>